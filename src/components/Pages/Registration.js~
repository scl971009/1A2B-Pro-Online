import React, {Component} from "react";
<<<<<<< HEAD
import axios from 'axios';
=======

>>>>>>> e563de9... Update registration
export default class Registration extends Component {
    constructor(props){
        super(props);

        this.state = {
            email: "",
            password: "",
            password_confirmation: "",
<<<<<<< HEAD
            name: "",
=======
>>>>>>> e563de9... Update registration
            registrationErrors: ""
        }

        this.handleSubmit = this.handleSubmit.bind(this);
        this.handleChange = this.handleChange.bind(this);
    }
    handleChange(event){
        this.setState({
            [event.target.name]: event.target.value
        });

    }
    handleSubmit(event){
<<<<<<< HEAD
        const { email, password, password_confirmation, name} = this.state;
=======
        const { email, password, password_confirmation} = this.state;
>>>>>>> e563de9... Update registration

        if (password !== password_confirmation){
            alert("Fuck you");
        }
        else{
<<<<<<< HEAD
<<<<<<< HEAD
            axios.get('/sign_up/'.concat(email, '/', password, '/', name),
            { withCredentials: true })
            .then(response => {
                //successful
                if(response.data.result === 0){
                    this.props.handleSuccessfulAuth(response.data)
                }
                //error
                else if (response.data.result === -1){
                    console.log("fuck you error");
                }
                //duplicate
                else if (response.data.result === 1){
                    console.log("fuck duplicate");
                }
            })
            .catch(error => {
                console.log("registration error", error);
=======
=======
>>>>>>> e563de9... Update registration
            //not sure if it is correct or not.
            fetch('/sign_up')
            .then(res => res.json())
            .then(data => {
                //success
                if(data.result === 0){
                    console.log("creating sucessfully");
                }
                //error
                else if (data.result === -1){
                    console.log("fuck you error");
                }
                //duplicate
                else{
                    console.log("fuck duplicate");
                }
<<<<<<< HEAD
>>>>>>> 1e5c546... connect to backend trial #1
=======
>>>>>>> e563de9... Update registration
            });
        }
        event.preventDefault();
    }
    render(){
        return (<div>
            <form onSubmit = {this.handleSubmit}>
                <input 
                    type="email" 
                    name="email" 
                    placeholder="Email" 
                    value={this.state.email} 
                    onChange={this.handleChange} 
                    required 
                />

                <input 
                    type="password" 
                    name="password" 
                    placeholder="password" 
                    value={this.state.password} 
                    onChange={this.handleChange} 
                    required 
                />

                <input 
                    type="password" 
                    name="password_confirmation" 
                    placeholder="password_confirmation" 
                    value={this.state.password_confirmation} 
                    onChange={this.handleChange} 
                    required 
                />

<<<<<<< HEAD
                <input 
                    type="name" 
                    name="name" 
                    placeholder="name" 
                    value={this.state.name} 
                    onChange={this.handleChange} 
                    required 
                />
=======
>>>>>>> e563de9... Update registration
                <button type="submit">Register</button>

            </form>

        </div>
        )
    }
}